# MASTERJOURNAL — Inkswarm DetectLab

> Generated by RC-0001 (Repo Reforge Ceremony) on 2026-01-04. This file is the **single canonical journal index**. All original journals were moved to `journals/legacy/` for traceability.

## How to use

- Start here for the **project timeline** and jump into any legacy journal when you need detail.
- New work should append to the latest active ceremony journal (or create a new one) **and add an entry here**.

## Index

- [CF entries](#cf-entries)
- [CR entries](#cr-entries)
- [CP entries](#cp-entries)
- [RR entries](#rr-entries)
- [CC entries](#cc-entries)
- [D entries](#d-entries)

## cf-entries

### Code Freezes

#### CF-0001

- CF-0001 created a stable repo snapshot through D-0004.
- Added Code Freeze docs + restart masterprompt.
- D-0004 remains “deferred validation”; no green-test claims.
- Next: run deferred validation → D-0005 Parquet mandatory → CR-0002 → RR → MVP → CF.
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0008__CF-0001__code-freeze.md`, `journals/legacy/inkswarm-detectlab__J-0008__CF-0001__code-freeze.md`

#### CF-0002

- Freeze doc: `CODE_FREEZE__CF-0002.md`
- Restart masterprompt: `inkswarm-detectlab__MASTERPROMPT_CF-0002__Code-Freeze-Restart.md`
- RR scripts: `scripts/rr_mvp.ps1`, `scripts/rr_mvp.sh`
- RR docs: `docs/release_readiness_mvp.md`, `docs/mvp_user_guide.md`
- Deferred validation instructions: `DEFERRED_VALIDATION__D-0004.md`
- Unit tests: **not asserted here** (must be run in the active chat where validation is claimed).
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0013__CF-0002__code-freeze.md`, `journals/legacy/inkswarm-detectlab__J-0013__CF-0002__code-freeze.md`

#### CF-0005

- Ran the canonical smoke pipeline end-to-end with `RUN_XXX_0005` and confirmed expected artifacts.
- Curated docs to remove “pending / placeholder” friction and aligned instructions with the real runtime surface.
- Added canonical pages:
- `docs/runbook.md` (includes git commands)
- `docs/repo_map.md`
- `docs/notebooks.md`
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0022__CF-0005__verified-run-and-docs-stabilization.md`

## cr-entries

### Code Reviews

#### CR-0001

- Replaced Python `hash()` usage with **stable SHA256-based** identifiers for deterministic IDs.
- Added **canonicalize-before-write-and-hash** (stable sort + schema column order).
- Checkout adverse assignment is now **deterministic exact-k** to reduce variance in small runs.
- `write_auto()` now reports actual **format written** (`parquet` or `csv`) + fallback note.
- Manifest + summary now include **Outputs written** with format + fallback note.
- CLI improvements:
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0003__CR-0001__d-0002-cr-patch.md`, `journals/legacy/inkswarm-detectlab__J-0003__CR-0001__d-0002-cr-patch.md`

#### CR-0002

- `src/inkswarm_detectlab/cli.py`
- `src/inkswarm_detectlab/config/models.py`
- `src/inkswarm_detectlab/models/runner.py`
- `docs/baselines.md`
- `docs/getting_started.md`
- `docs/windows_repro.md`
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0011__CR-0002__baseline-robustness-and-rr-requirements.md`, `journals/legacy/inkswarm-detectlab__JM-0011__CR-0002__review-after-d-0006.md`, `journals/legacy/inkswarm-detectlab__J-0011__CR-0002__baseline-robustness-and-rr-requirements.md`, `journals/legacy/inkswarm-detectlab__J-0011__CR-0002__review-after-d-0006.md`

#### CR-0003

- Ceremony doc: `docs/ceremonies/CR-0003.md`
- Share exporter: `src/inkswarm_detectlab/share/evidence.py`
- UI updated: `src/inkswarm_detectlab/ui/bundle.py`, `src/inkswarm_detectlab/ui/summarize.py`
- RR remains postponed until local Windows run.
- When RR runs, zip `runs/<run_id>/share/` as the default “send-to-someone” artifact.
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0020__CR-0003__stakeholder-defensibility-review.md`, `journals/legacy/inkswarm-detectlab__J-0020__CR-0003__stakeholder-defensibility-review.md`

#### CR-0004

- `CODE_REVIEW__CR-0004.md`
- Rewrote `src/inkswarm_detectlab/share/evidence.py` (share packaging + sha256 evidence manifest)
- Fixed manifest IO semantics (`src/inkswarm_detectlab/io/manifest.py`) so callers can pass run directories
- Exported report symbol used by tests (`src/inkswarm_detectlab/reports/__init__.py`)
- Added missing declared dependency: `numpy` in `pyproject.toml`
- Added compile/syntax check to CI (`python -m compileall src`)
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0021__CR-0004__repo-hardening-and-docs-curation.md`

## cp-entries

### Ceremony Planning

#### CP-0001

- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0005__CP-0001__planning-roadmap-highlevel.md`, `journals/legacy/inkswarm-detectlab__J-0005__CP-0001__planning-roadmap-highlevel.md`

#### CP-0002

- D-0021
- D-0022
- planning
- roadmap
- baselines
- notebooks
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0024__CP-0002__Planning-Roadmap-D-0021-D-0022__METADATA.md`, `journals/legacy/inkswarm-detectlab__J-0024__CP-0002__Planning-Roadmap-D-0021-D-0022.md`

## rr-entries

### Release Readiness

#### RR-0001

- Config: `configs/skynet_mvp.yaml`
- Helper script: `scripts/rr_mvp.ps1` (preferred)
- Evidence directory: `rr_evidence/RR-0001/<base_run_id>/`
- Evidence summary: `journals/inkswarm-detectlab__RR_EVIDENCE__RR-0001__<base_run_id>.md`
- Run A folder: `runs/<base_run_id>_A/`
- Run B folder: `runs/<base_run_id>_B/`
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0012__RR-0001__mvp-release-readiness.md`, `journals/legacy/inkswarm-detectlab__J-0012__RR-0001__mvp-release-readiness.md`

## cc-entries

### Change Controls / Deferred validations

#### CC-0001

- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0007__CC-0001__deferred-validation-d-0004.md`, `journals/legacy/inkswarm-detectlab__J-0007__CC-0001__deferred-validation-d-0004.md`

#### CC-0002

- CC: deferred validation for D-0004 extended explicitly to **post-MVP** per restart constraints.
- Mitigations were implemented as part of D-0005 (see J-0010) to keep the pipeline fail-closed and diagnosable.
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0009__CC-0002__extend-deferred-validation-d-0004.md`, `journals/legacy/inkswarm-detectlab__J-0009__CC-0002__extend-deferred-validation-d-0004.md`

## d-entries

### Deliverables

#### D-0001

- Created repo skeleton (src layout), Typer CLI, Pydantic+YAML config, and schema v1 for `login_attempt` + `checkout_attempt` (support embedded in login).
- Standardized timezone to `America/Argentina/Buenos_Aires`; unified identifier to `user_id`.
- Implemented canonical run layout under `runs/<run_id>/raw/` + `manifest.json`.
- Added committed placeholder run `PLACEHOLDER_RUN_0001` + generator script (writes Parquet when available; CSV fallback used here).
- Added MkDocs docs skeleton + lore bible.
- Added notebooks and ensured they execute via pytest (nbclient).
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0001__D-0001__repo-skeleton.md`, `journals/legacy/inkswarm-detectlab__J-0001__D-0001__repo-skeleton.md`

#### D-0002

- End-to-end **SKYNET v1** synthetic pipeline for:
- `login_attempt` (primary; multi-label subtypes)
- `checkout_attempt` (present; ~0.5% adverse; fraud disabled until SPACING GUILD)
- Leakage-aware datasets:
- **15% by-user holdout** (uniform, seeded)
- **85/15 time split** for remaining users
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0002__D-0002__skynet-pipeline.md`, `journals/legacy/inkswarm-detectlab__J-0002__D-0002__skynet-pipeline.md`

#### D-0003

- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0004__D-0003__featurelab-login-attempt.md`, `journals/legacy/inkswarm-detectlab__J-0004__D-0003__featurelab-login-attempt.md`

#### D-0004

- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0006__D-0004__baselinelab-login-attempt.md`, `journals/legacy/inkswarm-detectlab__J-0006__D-0004__baselinelab-login-attempt.md`

#### D-0005

- Parquet is mandatory across all artifacts (raw/dataset/features/models).
- `read_auto`/`write_auto` no longer support CSV fallback; legacy CSV triggers fail-closed guidance.
- Kept explicit migration tool: `detectlab dataset parquetify` (writes parquet next to csv; updates manifest; keeps csv).
- Updated docs + deferred validation scripts to run parquetify first when validating legacy fixture.
- Fixture remains legacy CSV; migration is required before running FeatureLab/BaselineLab on it.
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0009__D-0005__parquet-mandatory.md`, `journals/legacy/inkswarm-detectlab__JM-0010__D-0005__parquet-mandatory-and-baselines-hardening.md`, `journals/legacy/inkswarm-detectlab__J-0009__D-0005__parquet-mandatory.md`, `journals/legacy/inkswarm-detectlab__J-0010__D-0005__parquet-mandatory-and-baselines-hardening.md`

#### D-0006

- Added `detectlab report generate` CLI.
- Generates `final_report.md` + `insights.json` under `runs/<run_id>/reports/`.
- Summarizes manifest + FeatureLab + BaselineLab (if present) and adds operator narrative.
- Updates run manifest to reference the report artifacts.
- Added minimal unit test for report generation without baselines.
- Added docs page `Reporting` and MkDocs nav entry.
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0010__D-0006__reporting-final-report-generator.md`, `journals/legacy/inkswarm-detectlab__J-0010__D-0006__reporting-final-report-generator.md`

#### D-0006.5

- CLI:
- `src/inkswarm_detectlab/cli.py` (new `ui` subcommands)
- `src/inkswarm_detectlab/ui/summarize.py`
- `src/inkswarm_detectlab/ui/bundle.py`
- Docs:
- `docs/mvp_user_guide.md` (Sharing results updated)
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0015__D-0006.5__shareable-ui-v1-html-viewer.md`, `journals/legacy/inkswarm-detectlab__J-0015__D-0006.5__shareable-ui-v1-html-viewer.md`

#### D-0007

- Deliverable: D-0007 — FeatureLab v1: checkout parity + cross-event context
- Status: Implemented
- Validation in this chat:
- Unit tests: PASS (pyarrow-dependent tests skipped)
- Manual review: docs updated + CLI updated + new artifacts registered in run manifest
- Notes:
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0016__D-0007__featurelab-v1-checkout-parity-and-cross-event.md`, `journals/legacy/inkswarm-detectlab__J-0016__D-0007__featurelab-v1-checkout-parity-and-cross-event.md`

#### D-0008

- `runs/<run_id>/models/login_attempt/baselines/metrics.json`
- Includes `status` (`ok` / `partial` / `failed`) and a compact `train.threshold_table_top3`.
- `runs/<run_id>/models/login_attempt/baselines/report.md`
- Contains a full baseline report plus a compact summary table.
- `runs/<run_id>/logs/baselines.log`
- Persistent debug log; captures failures without losing artifacts.
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0017__D-0008__baselinelab-v1-headline-metrics-and-stakeholder-reporting.md`, `journals/legacy/inkswarm-detectlab__J-0017__D-0008__baselinelab-v1-headline-metrics-and-stakeholder-reporting.md`

#### D-0009

- **D-0009**: Add a best-effort orchestrator command: `detectlab run mvp`.
- Baselines: **logreg + rf** (HGB excluded until crash is resolved)
- Output format: **HTML** (static bundle)
- Orchestration goal: **fastest** happy path; keep running and report failures
- A single command runs the MVP pipeline and generates a shareable artifact.
- On failure, prints a clear per-step status log and exits non-zero.
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0018__D-0009__mvp-orchestrator-one-command.md`, `journals/legacy/inkswarm-detectlab__J-0018__D-0009__MVP-Orchestrator-One-Command.md`

#### D-0010

- Primary truth split: **user_holdout** (stakeholder-first), time_eval is drift check.
- Slice set: **recommended** (playbooks + MFA/country/etc.).
- Include **threshold stability**: “what threshold shift is needed to keep 1% FPR?”.
- Reporting format: **Markdown + JSON**, with explicit “partial” notes when inputs are missing.
- `runs/<run_id>/reports/eval_stability_login_attempt.md`
- `runs/<run_id>/reports/eval_slices_login_attempt.md`
- Legacy journals: `journals/legacy/inkswarm-detectlab__JM-0019__D-0010__EvalLab-v0__slices-and-stability.md`, `journals/legacy/inkswarm-detectlab__J-0019__D-0010__EvalLab-v0__slices-and-stability.md`

#### D-0019

- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0023__D-0019__Shared-feature-cache-and-run-speed.md`

#### D-0022

- (locked)
- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0025__D-0022__Step-notebook-solution.md`

#### D-0023

- Introduce a typed, reusable **StepResult** contract so notebook/CLI step execution can:
- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0026__D-0023__Step-contract-hardening.md`

#### D-0024

- Centralize step-level reuse logic so the step notebook can avoid recompute with minimal wasted time.
- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0027__D-0024__Manifest-first-reuse-policy.md`

#### D-0024.1

- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0026__D-0024.1__Pre-RR-patch-step-runner-and-manifest-preservation.md`

#### D-0024.2

- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0027__D-0024.2__RR-patch-wire_check-cfg-input.md`

#### D-0024.3

- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0028__D-0024.3__RR-patch-run_id_strategy-compat.md`

#### D-0024.4

- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0028__D-0024.4__RR-patch-wire_check-config-path-fallback.md`

#### D-0024.5

- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0028__D-0024.5__RR-patch-find_run_dir-double-runs.md`

#### D-0025

- Legacy journals: `journals/legacy/inkswarm-detectlab__J-0028__D-0025__rr-api-sanity-stabilization.md`

## Notes

- `journals/legacy/_drafts/` contains unfinished drafts preserved as-is.
- RC-0001 also appends a post-review status section to the latest Code Freeze journal.


## RC-0001.1 — Addendum (cluster quality + stronger revamp summary)

- Added `detectlab quality cluster` scorecard command.
- Added docs `docs/quality.md`.
- Expanded REVIEW_REPORT with quantitative delta + scope clarifications.
